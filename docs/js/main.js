const C=document.querySelector(".js__form"),a=document.querySelectorAll(".js-option"),w=document.querySelector(".js-input-name"),k=document.querySelector(".js-input-job"),q=document.querySelector(".js-input-phone"),T=document.querySelector(".js-input-email"),H=document.querySelector(".js-input-linkedin"),M=document.querySelector(".js-input-github"),x=document.querySelector(".js-btn-reset"),L=document.querySelector(".js-msg-phone"),b=document.querySelector(".js-msg-email"),y=document.querySelector(".js-msg-linkedin"),j=document.querySelector(".js-msg-git"),A=/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/,S=/^[A-Za-z]+[A-Za-z0-9]*(?:[-][A-Za-z0-9]+)*$/,O=/(?:([+]\d{1,4})[-.\s]?)?(?:[(](\d{1,3})[)][-.\s]?)?(\d{1,4})[-.\s]?(\d{1,4})[-.\s]?(\d{1,9})/g,r=document.querySelector(".js_btnCreate"),P=document.querySelector(".js-section-created"),_=document.querySelector(".js-cardLink"),s=document.querySelector(".js-create-error"),R=document.querySelector(".js-x-btn"),u=document.querySelector(".js__preview_name"),d=document.querySelector(".js__preview_job"),m=document.querySelector(".js__preview_phone"),p=document.querySelector(".js__preview_email"),f=document.querySelector(".js__preview_linkedn"),h=document.querySelector(".js__preview_github"),l=document.querySelector(".js__preview");let t={palette:"1",name:"",job:"",phone:"",email:"",linkedin:"",github:"",photo:""};function I(e){l.classList.remove("color-2","color-3"),e==="2"?l.classList.add("color-2"):e==="3"&&l.classList.add("color-3")}function N(e){const o=e.target.name,n=e.target.value;o==="palette"&&(t.palette=n,I(n))}function $(e){const o=e.target.id,n=e.target.value;o!==""&&(t[o]=n,o==="name"?u.innerHTML=n:o==="job"?d.innerHTML=n:o==="email"?A.test(n)===!0?(p.href="mailto:"+n,b.innerHTML=""):b.innerHTML="La dirección de correo introducida no es válida.":o==="phone"?O.test(n)===!0?(m.href=n,L.innerHTML=""):L.innerHTML="El número de teléfono introducido no es válido.":o==="linkedin"?S.test(n)===!0?(f.href="http://linkedin.com/in/"+n,y.innerHTML=""):y.innerHTML="El nombre de usuario no es válido.":o==="github"&&(S.test(n)===!0?(h.href="http://github.com/"+n,j.innerHTML=""):j.innerHTML="El nombre de usuario no es válido."))}const U=e=>{N(e),$(e),localStorage.setItem("newCard",JSON.stringify(t)),E()};C.addEventListener("input",U);const c=new FileReader,D=document.querySelector(".js__profile-upload-btn"),g=document.querySelector(".js__profile-image"),v=document.querySelector(".js__profile-preview");function J(e){const o=e.currentTarget.files[0];c.addEventListener("load",F),c.readAsDataURL(o)}function F(){g.style.backgroundImage=`url(${c.result})`,v.style.backgroundImage=`url(${c.result})`,t.photo=c.result,localStorage.setItem("formData",JSON.stringify(t))}D.addEventListener("change",J);const z=document.querySelectorAll(".js_collapsable-header"),G=document.querySelectorAll(".js_fieldset"),Z=e=>{e.preventDefault();const n=e.currentTarget.parentNode;for(const i of G)i===n?i.classList.remove("collapsable--close"):i.classList.add("collapsable--close")};for(const e of z)e.addEventListener("click",Z);function B(){a[0].checked=!0,l.classList.remove("color-2"),l.classList.remove("color-3")}function K(e){e.palette="1",e.name="",e.job="",e.phone="",e.email="",e.linkedin="",e.github="",e.photo="",console.log(e)}function X(){w.value="",k.value="",q.value="",T.value="",H.value="",M.value="",g.style.backgroundImage=""}function Q(){u.innerHTML="Nombre Apellido",d.innerHTML="Front-end developer",m.href="",p.href="",f.href="",h.href="",v.style.backgroundImage="url(https://ih0.redbubble.net/image.1615061405.6202/raf,360x360,075,t,fafafa:ca443f4786.jpg)"}function E(){P.classList.add("collapsed"),r.classList.remove("btn-create_grey"),r.classList.add("btn-create"),r.classList.remove("btn-create_grey"),s.innerHTML=""}function V(e){K(t),X(),Q(),B(),E(),localStorage.removeItem("newCard")}x.addEventListener("click",V);function W(e){const n=`https://twitter.com/intent/tweet?text=${encodeURIComponent("¡Mira la tarjeta que he creado con MOD^L CARDS!")}&url=${e.cardURL}`;R.href=n}const Y=()=>{fetch("https://dev.adalab.es/api/card/",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{console.log(e),e.success?(r.classList.remove("btn-create"),r.classList.add("btn-create_grey"),P.classList.remove("collapsed"),_.innerHTML=e.cardURL,_.href=e.cardURL,s.innerHTML="",W(e)):e.error.toLowerCase().includes("mandatory field")?s.innerHTML="Es necesario rellenar todos los campos.":e.error.includes("ER_DATA_TOO_LONG")&&(s.innerHTML="El peso de la imagen no puede ser superior a 19KB.")})};function ee(e){e.preventDefault(),Y()}r.addEventListener("click",ee);function te(){a[0].checked=!1,a[parseInt(t.palette)-1].checked=!0}function ne(){te(),w.value=t.name,k.value=t.job,q.value=t.phone,T.value=t.email,H.value=t.linkedin,M.value=t.github,g.style.backgroundImage=`url(${t.photo})`}function oe(){u.innerHTML=t.name,d.innerHTML=t.job,m.href=t.phone,p.href=t.email,f.href=t.linkedin,h.href=t.github,v.style.backgroundImage=`url(${t.photo})`,I(t.palette)}const re=()=>{const e=localStorage.getItem("newCard");e!==null&&(t=JSON.parse(e),ne(),oe())};re();
//# sourceMappingURL=main.js.map
