const q=document.querySelector(".js__form"),g=document.querySelector(".js__preview_name"),h=document.querySelector(".js__preview_job"),v=document.querySelector(".js__preview_phone"),L=document.querySelector(".js__preview_email"),y=document.querySelector(".js__preview_linkedn"),b=document.querySelector(".js__preview_github"),s=document.querySelector(".js__preview"),a=document.querySelector(".js-msg-phone"),u=document.querySelector(".js-msg-email"),d=document.querySelector(".js-msg-linkedin"),m=document.querySelector(".js-msg-git"),k=/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/,p=/^[A-Za-z]+[A-Za-z0-9]*(?:[-][A-Za-z0-9]+)*$/,w=/(?:([+]\d{1,4})[-.\s]?)?(?:[(](\d{1,3})[)][-.\s]?)?(\d{1,4})[-.\s]?(\d{1,4})[-.\s]?(\d{1,9})/g,T=document.querySelector(".js-btn-reset"),H=document.querySelector(".js-onecol"),M=document.querySelector(".js-input-name"),E=document.querySelector(".js-input-job"),P=document.querySelector(".js-input-phone"),C=document.querySelector(".js-input-email"),I=document.querySelector(".js-input-linkedin"),A=document.querySelector(".js-input-github");localStorage.getItem("newCard");const f=document.querySelector(".js-cardLink"),l=document.querySelector(".js-create-error"),o={palette:"1",name:"",job:"",phone:"",email:"",linkedin:"",github:"",photo:""};function x(e){const t=e.target.name,n=e.target.value;t==="palette"&&(s.classList.remove("color-2","color-3"),o.palette=n,n==="2"?s.classList.add("color-2"):n==="3"&&s.classList.add("color-3"))}function N(e){const t=e.target.id,n=e.target.value;t!==""&&(o[t]=n,t==="name"?g.innerHTML=n:t==="job"?h.innerHTML=n:t==="email"?k.test(n)===!0?(L.href="mailto:"+n,u.innerHTML=""):u.innerHTML="La dirección de correo introducida no es válida.":t==="phone"?w.test(n)===!0?(v.href=n,a.innerHTML=""):a.innerHTML="El número de teléfono introducido no es válido.":t==="linkedin"?p.test(n)===!0?(y.href="http://linkedin.com/in/"+n,d.innerHTML=""):d.innerHTML="El nombre de usuario no es válido.":t==="github"&&(p.test(n)===!0?(b.href="http://github.com/"+n,m.innerHTML=""):m.innerHTML="El nombre de usuario no es válido."))}const O=e=>{x(e),N(e),console.log(o)};q.addEventListener("input",O);function R(){H.checked=!0,s.classList.remove("color-2"),s.classList.remove("color-3")}function F(e){e.palette="",e.name="",e.job="",e.phone="",e.email="",e.linkedin="",e.github="",e.photo="",console.log(e)}function J(){M.value="",E.value="",P.value="",C.value="",I.value="",A.value="",j.style.backgroundImage=""}function U(){g.innerHTML="Nombre Apellido",h.innerHTML="Front-end developer",v.href="",L.href="",y.href="",b.href="",_.style.backgroundImage="url(https://ih0.redbubble.net/image.1615061405.6202/raf,360x360,075,t,fafafa:ca443f4786.jpg)"}function $(){S.classList.add("collapsed"),r.classList.remove("btn-create_grey"),r.classList.add("btn-create"),r.classList.remove("btn-create_grey"),l.innerHTML=""}function z(e){F(o),J(),U(),R(),$()}T.addEventListener("click",z);const c=new FileReader,G=document.querySelector(".js__profile-upload-btn"),j=document.querySelector(".js__profile-image"),_=document.querySelector(".js__profile-preview");function Z(e){const t=e.currentTarget.files[0];c.addEventListener("load",B),c.readAsDataURL(t)}function B(){j.style.backgroundImage=`url(${c.result})`,_.style.backgroundImage=`url(${c.result})`,o.photo=c.result,localStorage.setItem("formData",JSON.stringify(o))}G.addEventListener("change",Z);const K=document.querySelectorAll(".js_collapsable-header"),D=document.querySelectorAll(".js_fieldset"),Q=e=>{e.preventDefault();const n=e.currentTarget.parentNode;console.log(e.currentTarget),console.log(n.parentNode);for(const i of D)i===n?i.classList.remove("collapsable--close"):i.classList.add("collapsable--close")};for(const e of K)e.addEventListener("click",Q);const r=document.querySelector(".js_btnCreate"),S=document.querySelector(".js-section-created");function V(e){e.preventDefault(),fetch("https://dev.adalab.es/api/card/",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(o)}).then(t=>t.json()).then(t=>{console.log(t),t.success?(r.classList.remove("btn-create"),r.classList.add("btn-create_grey"),S.classList.remove("collapsed"),localStorage.setItem("newCard",JSON.stringify(o)),f.innerHTML=t.cardURL,f.href=t.cardURL,l.innerHTML=""):t.error.toLowerCase().includes("mandatory field")?l.innerHTML="Es necesario rellenar todos los campos.":t.error.includes("ER_DATA_TOO_LONG")&&(l.innerHTML="El peso de la imagen no puede ser superior a 19KB.")})}r.addEventListener("click",V);
//# sourceMappingURL=main.js.map
